(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{c4FF:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){return function(){this.id=0,this.email="",this.name="",this.ruc="",this.identification="",this.main_phone_number="",this.secondary_phone_number="",this.address="",this.address_map_latitude=-.2153676,this.address_map_longitude=-78.5036064}}()},yUkU:function(e,t,n){"use strict";n.r(t);var i=n("CcnG"),l=function(){return function(){}}(),r=n("pMnS"),s=n("Vnl2"),a=n("9AJC"),o=n("4GxJ"),u=n("Ip0R"),c=n("cfkQ"),g=n("z8lh"),d=n("ZYjt"),p=n("SwDF"),f=n("/gWu"),h=n("3Nac"),m=n("c4FF"),v=n("teKj"),R=n("pQVB"),_=function(){function e(e,t,n,i){this.registerDataService=e,this.userDataService=t,this.register_typeDataService=n,this.stateDataService=i,this.alowed_capacity_types=[],this.registers_mintur=[],this.registerMinturSelected=new f.a,this.user=new m.a,this.config={paging:!0,filtering:{filterString:""},className:["table-striped","table-hover","table-bordered"]},this.rowsRegister=[],this.columnsRegister=[],this.dataRegister=[],this.currentPageRegister=1,this.lastPageRegister=1,this.recordsByPageRegister=5,this.states=[],this.estado_tramite_selected_code="1",this.register_types=[]}return e.prototype.ngOnInit=function(){this.getUser(),this.getStates()},e.prototype.refresh=function(){this.getRegistersMintur()},e.prototype.getStates=function(){var e=this;this.states=[],this.stateDataService.get().then(function(t){e.states=t,e.getRegisterTypes(),e.getSpecificStates()}).catch(function(e){console.log(e)})},e.prototype.getRegisterTypes=function(){var e=this;this.register_typeDataService.get().then(function(t){e.register_types=t}).catch(function(e){console.log(e)})},e.prototype.getSpecificStates=function(){var e=this;this.specific_states=[],this.states.forEach(function(t){t.father_code==e.estado_tramite_selected_code&&e.specific_states.push(t)})},e.prototype.getUser=function(){var e=this;this.userDataService.get(JSON.parse(sessionStorage.getItem("user")).id).then(function(t){e.user=t,e.refresh()}).catch(function(e){return console.log(e)})},e.prototype.getRegistersMintur=function(){var e=this;this.registers_mintur=[],this.registerMinturSelected=new f.a,this.registerDataService.get_registers_by_ruc(this.user.ruc).then(function(t){e.registers_mintur=t,e.registers_mintur.length>0&&e.buildDataTableRegister()}).catch(function(e){return console.log(e)})},e.prototype.onChangeTableRegister=function(e,t){void 0===t&&(t={page:this.currentPageRegister,itemsPerPage:this.recordsByPageRegister}),e.filtering&&Object.assign(this.config.filtering,e.filtering),e.sorting&&Object.assign(this.config.sorting,e.sorting);var n=this.changeFilterRegister(this.dataRegister,this.config),i=this.changeSortRegister(n,this.config);this.rowsRegister=t&&e.paging?this.changePageRegister(t,i):i},e.prototype.changeFilterRegister=function(e,t){var n=this;this.rowsRegister.forEach(function(e){e.selected=""});var i=e;if(this.columnsRegister.forEach(function(e){e.filtering&&(i=i.filter(function(t){return t[e.name].match(e.filtering.filterString)}))}),!t.filtering)return i;if(t.filtering.columnName)return i.filter(function(e){return e[t.filtering.columnName].match(n.config.filtering.filterString)});var l=[];return i.forEach(function(e){var t=!1;n.columnsRegister.forEach(function(i){e[i.name].toString().match(n.config.filtering.filterString)&&(t=!0)}),t&&l.push(e)}),i=l},e.prototype.changeSortRegister=function(e,t){if(!t.sorting)return e;for(var n=this.config.sorting.columns||[],i=void 0,l=void 0,r=0;r<n.length;r++)""!==n[r].sort&&!1!==n[r].sort&&(i=n[r].name,l=n[r].sort);return i?e.sort(function(e,t){return e[i]>t[i]?"desc"===l?-1:1:e[i]<t[i]?"asc"===l?-1:1:0}):e},e.prototype.changePageRegister=function(e,t){void 0===t&&(t=this.dataRegister);var n=(e.page-1)*e.itemsPerPage;return t.slice(n,e.itemsPerPage>-1?n+e.itemsPerPage:t.length)},e.prototype.buildDataTableRegister=function(){var e=this;this.columnsRegister=[{title:"Seleccionado",name:"selected"},{title:"C\xf3digo del Establecimiento",name:"establishment_code"},{title:"Ubicaci\xf3n del Establecimiento",name:"address"},{title:"C\xf3digo del Registro",name:"register_code"},{title:"Tipo de Registro",name:"register_type"},{title:"Estado",name:"state"},{title:"Observaciones",name:"notes"}];var t=[];this.registers_mintur.forEach(function(n){var i=new Date,l=e.getRegisterState(n.status_register.state_id);0==l.search("Aprobado")&&(i=new Date(n.status_register.updated_at)),0==l.search("Negado")&&(i=new Date(n.status_register.updated_at));var r=new Date(n.register.updated_at),s=Math.abs(r.getTime()-i.getTime()),a=Math.ceil(s/864e5);a<7&&a.toString(),a>=7&&a<=10&&a.toString(),a>10&&a.toString(),t.push({selected:"",id:n.register.id,establishment_code:n.establishment.ruc_code_id,address:n.establishment.address_main_street+" "+n.establishment.address_number+" "+n.establishment.address_secondary_street,register_code:n.register.code,register_type:n.type.register_category.name+" / "+n.type.register_type.name,state:l,notes:'<div class="col-12 text-justify">'+n.status_register.justification+"</div>"})}),this.dataRegister=t,this.onChangeTableRegister(this.config)},e.prototype.onCellClickRegister=function(e){var t=this;this.registers_mintur.forEach(function(n){n.register.id==e.row.id&&t.selectRegister(n.register)}),this.rowsRegister.forEach(function(t){t.selected=t.id==e.row.id?'<div class="col-12 text-right"><span class="far fa-hand-point-right"></span></div>':""})},e.prototype.selectRegister=function(e){console.log(e)},e.prototype.getRegisterState=function(e){var t="",n="";return this.states.forEach(function(i){i.id==e&&(t=i.name,n=i.father_code)}),this.states.forEach(function(e){e.code==n&&(t=e.name+" - "+t)}),t},e}(),b=i["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function y(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"input",[["class","form-control"],["placeholder","Buscar..."]],null,[[null,"input"]],function(e,t,n){var l=!0,r=e.component;return"input"===t&&(l=!1!==i["\u0275nov"](e,1).onChangeFilter(n.target.value)&&l),"input"===t&&(l=!1!==r.onChangeTableRegister(r.config)&&l),l},null,null)),i["\u0275did"](1,16384,null,0,s.NgTableFilteringDirective,[i.ElementRef,i.Renderer],{ngTableFiltering:[0,"ngTableFiltering"]},null)],function(e,t){e(t,1,0,t.component.config.filtering)},null)}function S(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["Primera"]))],null,null)}function C(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["Anterior"]))],null,null)}function w(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["Siguiente"]))],null,null)}function T(e){return i["\u0275vid"](0,[(e()(),i["\u0275ted"](-1,null,["\xdaltima"]))],null,null)}function k(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,15,"ngb-pagination",[["role","navigation"]],null,[[null,"pageChange"]],function(e,t,n){var i=!0,l=e.component;return"pageChange"===t&&(i=!1!==(l.currentPageRegister=n)&&i),"pageChange"===t&&(i=!1!==l.onChangeTableRegister(l.config,n)&&i),i},a.g,a.d)),i["\u0275did"](1,573440,null,6,o.C,[o.D],{boundaryLinks:[0,"boundaryLinks"],collectionSize:[1,"collectionSize"],maxSize:[2,"maxSize"],page:[3,"page"],pageSize:[4,"pageSize"]},{pageChange:"pageChange"}),i["\u0275qud"](335544320,1,{tplEllipsis:0}),i["\u0275qud"](335544320,2,{tplFirst:0}),i["\u0275qud"](335544320,3,{tplLast:0}),i["\u0275qud"](335544320,4,{tplNext:0}),i["\u0275qud"](335544320,5,{tplNumber:0}),i["\u0275qud"](335544320,6,{tplPrevious:0}),(e()(),i["\u0275and"](0,null,null,1,null,S)),i["\u0275did"](9,16384,[[2,4]],0,o.E,[i.TemplateRef],null,null),(e()(),i["\u0275and"](0,null,null,1,null,C)),i["\u0275did"](11,16384,[[6,4]],0,o.I,[i.TemplateRef],null,null),(e()(),i["\u0275and"](0,null,null,1,null,w)),i["\u0275did"](13,16384,[[4,4]],0,o.H,[i.TemplateRef],null,null),(e()(),i["\u0275and"](0,null,null,1,null,T)),i["\u0275did"](15,16384,[[3,4]],0,o.F,[i.TemplateRef],null,null)],function(e,t){var n=t.component;e(t,1,0,!0,n.registers_mintur.length,10,n.currentPageRegister,n.recordsByPageRegister)},null)}function P(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,1,"h1",[["class","col-12 text-right"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,[" Tarifario Rack "])),(e()(),i["\u0275eld"](3,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275eld"](4,0,null,null,2,"div",[["class","col-12"]],null,null,null,null,null)),(e()(),i["\u0275and"](16777216,null,null,1,null,y)),i["\u0275did"](6,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275eld"](7,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275eld"](8,0,null,null,2,"div",[["class","col-12 mt-2"]],null,null,null,null,null)),(e()(),i["\u0275eld"](9,0,null,null,1,"ng-table",[],null,[[null,"cellClicked"],[null,"tableChanged"]],function(e,t,n){var i=!0,l=e.component;return"cellClicked"===t&&(i=!1!==l.onCellClickRegister(n)&&i),"tableChanged"===t&&(i=!1!==l.onChangeTableRegister(l.config)&&i),i},c.b,c.a)),i["\u0275did"](10,49152,null,0,g.NgTableComponent,[d.DomSanitizer],{rows:[0,"rows"],config:[1,"config"],columns:[2,"columns"]},{tableChanged:"tableChanged",cellClicked:"cellClicked"}),(e()(),i["\u0275eld"](11,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275eld"](12,0,null,null,2,"div",[["class","col-12"]],null,null,null,null,null)),(e()(),i["\u0275and"](16777216,null,null,1,null,k)),i["\u0275did"](14,16384,null,0,u.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,6,0,n.config.filtering),e(t,10,0,n.rowsRegister,n.config,n.columnsRegister),e(t,14,0,n.config.paging)},null)}function D(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-tarifario-rack",[],null,null,null,P,b)),i["\u0275did"](1,114688,null,0,_,[h.a,v.a,R.a,p.a],null,null)],function(e,t){e(t,1,0)},null)}var F=i["\u0275ccf"]("app-tarifario-rack",_,D,{},{},[]),E=n("gIcY"),N=n("sE5F"),I=n("ZYCi"),M=function(){return function(){}}(),z=n("kY/A");n.d(t,"TarifarioRackModuleNgFactory",function(){return j});var j=i["\u0275cmf"](l,[],function(e){return i["\u0275mod"]([i["\u0275mpd"](512,i.ComponentFactoryResolver,i["\u0275CodegenComponentFactoryResolver"],[[8,[r.a,F,a.a,a.b,a.l,a.m,a.i,a.j,a.k]],[3,i.ComponentFactoryResolver],i.NgModuleRef]),i["\u0275mpd"](4608,u.NgLocalization,u.NgLocaleLocalization,[i.LOCALE_ID,[2,u["\u0275angular_packages_common_common_a"]]]),i["\u0275mpd"](4608,E.s,E.s,[]),i["\u0275mpd"](4608,o.y,o.y,[i.ComponentFactoryResolver,i.Injector,o.tb,o.z]),i["\u0275mpd"](4608,h.a,h.a,[N.e,I.l]),i["\u0275mpd"](4608,v.a,v.a,[N.e]),i["\u0275mpd"](4608,p.a,p.a,[N.e,I.l]),i["\u0275mpd"](4608,R.a,R.a,[N.e,I.l]),i["\u0275mpd"](1073742336,u.CommonModule,u.CommonModule,[]),i["\u0275mpd"](1073742336,I.o,I.o,[[2,I.u],[2,I.l]]),i["\u0275mpd"](1073742336,M,M,[]),i["\u0275mpd"](1073742336,E.p,E.p,[]),i["\u0275mpd"](1073742336,E.e,E.e,[]),i["\u0275mpd"](1073742336,o.c,o.c,[]),i["\u0275mpd"](1073742336,o.f,o.f,[]),i["\u0275mpd"](1073742336,o.g,o.g,[]),i["\u0275mpd"](1073742336,o.k,o.k,[]),i["\u0275mpd"](1073742336,o.l,o.l,[]),i["\u0275mpd"](1073742336,o.q,o.q,[]),i["\u0275mpd"](1073742336,o.v,o.v,[]),i["\u0275mpd"](1073742336,o.A,o.A,[]),i["\u0275mpd"](1073742336,o.G,o.G,[]),i["\u0275mpd"](1073742336,o.Q,o.Q,[]),i["\u0275mpd"](1073742336,o.T,o.T,[]),i["\u0275mpd"](1073742336,o.W,o.W,[]),i["\u0275mpd"](1073742336,o.bb,o.bb,[]),i["\u0275mpd"](1073742336,o.fb,o.fb,[]),i["\u0275mpd"](1073742336,o.gb,o.gb,[]),i["\u0275mpd"](1073742336,o.hb,o.hb,[]),i["\u0275mpd"](1073742336,o.B,o.B,[]),i["\u0275mpd"](1073742336,z.Ng2TableModule,z.Ng2TableModule,[]),i["\u0275mpd"](1073742336,l,l,[]),i["\u0275mpd"](1024,I.j,function(){return[[{path:"",component:_}]]},[])])})}}]);