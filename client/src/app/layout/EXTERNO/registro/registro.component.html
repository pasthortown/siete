<div class="row">
  <div class="col-12 text-right">
    <h1>Gestión de Actividades Turísticas</h1>
  </div>
</div>
<button [hidden]="true" #mostrarPasos [ngx-scroll-to]="'#paso1'">Mostrar Pasos</button>
<div class="row">
  <div class="col-12">
    <ngb-accordion #acc="ngbAccordion" activeIds="ngb-panel-0">
      <ngb-panel id="terminosCondiciones">
        <ng-template ngbPanelTitle>
          <span>{{terminosCondicionesAgreement.title}}</span>
        </ng-template>
        <ng-template ngbPanelContent>
          <div class="col-12" [innerHTML]="terminosCondicionesAgreement.content">
          </div>
        </ng-template>
      </ngb-panel>
    </ngb-accordion>
    <div class="col-12">
      <div class="form-group mt-3 text-center">
        <label class="col-12"><strong>He leído, entendido y por lo tanto acepto los términos y condiciones</strong></label>
        <label class="switch"><input type="checkbox" id="baised_accounting" (change)="checkAgreement()"
            name="baised_accounting" [(ngModel)]="terminosCondiciones"><span class="slider round"></span></label>
      </div>
    </div>
  </div>
</div>
<div class="row" *ngIf="terminosCondiciones">
  <div class="col-12 mt-5">
    <div class="alert alert-warning" role="alert">
      <label class="col-12 text-justify"><strong>Atención</strong><br />
        Éste sistema utiliza información oficial a partir de las fuentes gubernamentales. Si los datos bloqueados no son
        correctos, usted debe acercarse a la entidad gubernamental custodia del dato para actualizarlo.
      </label>
    </div>
  </div>
</div>
<div class="row" *ngIf="terminosCondiciones">
  <div class="col-12">
    <div class="row mt-5">
      <div class="col-12 text-left">
        <h3>Datos:</h3>
      </div>
    </div>
    <div class="row">
      <div class="col-12">
        <ngb-tabset #pasosSuperiores (tabChange)="changeTabActiveSuperior($event)">
          <ngb-tab title="Paso I. Información de la Persona Natural/Jurídica" id="tab1">
            <ng-template ngbTabContent>
              <div class="row mt-3">
                <h4 class="col-12">
                  <strong>Registro Único de Contribuyente</strong>
                </h4>
              </div>
              <div class="row">
                <div class="col-12">
                  <div class="form-group">
                    <label>Número de RUC</label><span *ngIf="!rucValidated"
                      class="ml-2 badge badge-danger">Incorrecto</span>
                    <div class="input-group mb-3">
                      <div class="input-group-prepend">
                        <button type="button" class="btn btn-primary" title="Consultar con SRI" (click)="checkRuc()">
                          <i class="fas fa-sync"></i>
                        </button>
                      </div>
                      <input disabled type="text" class="form-control" id="ruc" maxlength="13"
                        placeholder="Número de RUC" [(ngModel)]="ruc_registro_selected.ruc.number" (keyup)="checkRuc()"
                        name="ruc" />
                    </div>
                  </div>
                </div>
                <div class="col-12">
                  <div class="alert alert-info mt-2 mb-2" role="alert">
                    <label class="col-12 text-justify"><strong>Atención</strong></label><br />
                    La información presentada a continuación es proporcionada por el Servicio de Rentas Internas, esta sección tiene carácter informativo, por favor si desea
                    actualizarla debe realizar el trámite en la entidad correspondiente<br/>
                    <a href="https://srienlinea.sri.gob.ec/" target="_blank">Ir al Sitio Web del SRI</a>
                  </div>
                </div>
                <div class="col-12" *ngIf="rucValidated">
                  <div class="form-group">
                    <label>DATOS DEL RUC</label>
                    <div class="col-12 text-justify" [innerHTML]="rucData">
                    </div>
                  </div>
                </div>
              </div>
              <div class="row" [hidden]="true">
                <div class="col-6">
                  <div class="form-group">
                    <label>Tipo de Contribuyente</label><span *ngIf="ruc_registro_selected.ruc.tax_payer_type_id == 0"
                      class="ml-2 badge badge-danger">Incorrecto</span>
                    <select disabled class="form-control" id="tax_payer_type_id" name="tax_payer_type_id" [(ngModel)]="
                          ruc_registro_selected.ruc.tax_payer_type_id
                        ">
                      <option value="0" selected>Seleccione...</option>
                      <option *ngFor="let tax_payer_type of tax_payer_types" value="{{ tax_payer_type.id }}">
                        {{ tax_payer_type.name }}
                      </option>
                    </select>
                  </div>
                </div>
                <div class="col-6">
                  <div class="form-group">
                    <label>Obligado a Llevar Contabilidad</label>
                    <div class="col-12">
                      <label class="switch"><input type="checkbox" disabled id="baised_accounting"
                          name="baised_accounting" [(ngModel)]="
                              ruc_registro_selected.ruc.baised_accounting
                            " /><span class="slider round"></span></label>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row" *ngIf="ruc_registro_selected.ruc.tax_payer_type_id > 1">
                <div class="col-12">
                  <div class="form-group">
                    <label for="group_type_id">Tipo de Personería Jurídica*</label><span
                      *ngIf="!validateGroupGivenTipe()" class="ml-2 badge badge-danger">Incorrecto</span>
                    <select class="form-control" id="group_type_id" name="group_type_id"
                      [(ngModel)]="ruc_registro_selected.ruc.group_given.group_type_id" (change)="
                          setGroupTypeSelected(
                            ruc_registro_selected.ruc.group_given.group_type_id
                          )
                        ">
                      <option value="0" selected>Seleccione...</option>
                      <option *ngFor="let group_type of group_types" value="{{ group_type.id }}">
                        {{ group_type.name }}
                      </option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="row mt-3" *ngIf="ruc_registro_selected.ruc.tax_payer_type_id > 1">
                <h4 class="col-12">
                  <strong>Escritura de Constitución</strong>
                </h4>
              </div>
              <div class="row" *ngIf="ruc_registro_selected.ruc.tax_payer_type_id > 1">
                <div class="col-12">
                  <div class="alert alert-info mt-2 mb-2" role="alert">
                    <label class="col-12 text-justify"><strong>Atención</strong></label><br />
                    El número de expediente para ingresar en esta sección, se lo puede obtener en la página de la Superintendencia de Companías.<br/>
                    <a href="http://appscvsmovil.supercias.gob.ec/portaldedocumentos/consulta_cia_param.zul" target="_blank">Ir al Sitio Web de la Superintendencia de Companías</a>
                  </div>
                </div>
              </div>
              <div class="row" *ngIf="ruc_registro_selected.ruc.tax_payer_type_id > 1">
                <div class="col-12">
                  <div class="form-group">
                    <label for="group_type_id">Número de Expediente de la Superintendencia de Companías*</label><span
                      *ngIf="ruc_registro_selected.ruc.group_given.register_code === ''" class="ml-2 badge badge-danger">Incorrecto</span>
                    <input type="text" class="form-control" min="0" id="expediente"
                      name="expediente" (keyup)="checkRegistroSupercias()" placeholder="Número de Expediente de la Superintendencia de Companías" [(ngModel)]="ruc_registro_selected.ruc.group_given.register_code"/>
                  </div>
                </div>
              </div>
              <div class="row mt-3" *ngIf="ruc_registro_selected.ruc.tax_payer_type_id > 1">
                <h4 class="col-12">
                  <strong>Representante Legal</strong>
                </h4>
              </div>
              <div class="row" *ngIf="ruc_registro_selected.ruc.tax_payer_type_id > 1">
                <div class="col-4">
                  <div class="form-group" *ngIf="ruc_registro_selected.ruc.group_given.group_type_id != 0">
                    <label>Cédula
                      {{ groupTypeSelected.representative_rol_name }}*</label><span
                      *ngIf="!identificationRepresentativePersonValidated"
                      class="ml-2 badge badge-danger">Incorrecto</span>
                    <div class="input-group mb-3">
                      <div class="input-group-prepend">
                        <button type="button" class="btn btn-primary" title="Consultar con Registro Civil"
                          (click)="checkIdentificationRepresentant()">
                          <i class="fas fa-sync"></i>
                        </button>
                      </div>
                      <input type="text" class="form-control" [disabled]="true" id="identificacionRepresentante" maxlength="10"
                        placeholder="Identificación {{
                            groupTypeSelected.representative_rol_name
                          }}" [(ngModel)]="
                            ruc_registro_selected.ruc.person_representative.identification
                          " (keyup)="checkIdentificationRepresentant()" name="identificacionRepresentante" />
                    </div>
                    <small *ngIf="identificationRepresentativePersonValidated" id="cedulaRepresentanteHelp"
                      class="form-text text-muted" [innerHTML]="representanteCedulaData"></small>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-group" *ngIf="ruc_registro_selected.ruc.group_given.group_type_id != 0">
                    <label>Fecha de Nombramiento*</label><span
                    *ngIf="!fechaNombramientoOK"
                    class="ml-2 badge badge-danger">Incorrecto</span>
                    <input type="date" class="form-control" id="assignment_date" name="assignment_date" (input)="fechasNombramiento()"
                      placeholder="assignmentDate" [ngModel]="
                          ruc_registro_selected.ruc.person_representative_attachment.assignment_date | date: 'y-MM-dd'
                        " (ngModelChange)="
                          ruc_registro_selected.ruc.person_representative_attachment.assignment_date = $event
                        " />
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-group" *ngIf="ruc_registro_selected.ruc.group_given.group_type_id != 0">
                    <label>Nombramiento Representante del Legal*</label><span *ngIf="!validateNombramiento()"
                      class="ml-2 badge badge-danger">Incorrecto</span>
                    <div class="input-group">
                      <div class="input-group-prepend">
                        <button [disabled]="!validateNombramiento()" type="button" title="Descargar"
                          class="btn btn-success" (click)="descargarNombramiento()">
                          <i class="fas fa-download"></i>
                        </button>
                        <button [disabled]="!validateNombramiento()" type="button" title="Eliminar"
                          class="btn btn-danger" (click)="borrarNombramiento()">
                          <i class="fas fa-trash"></i>
                        </button>
                      </div>
                      <input type="file" class="form-control" id="person_representative_attachment_file"
                        name="person_representative_attachment_file" placeholder="Nombramiento Representante del Legal"
                        (change)="CodeFilePersonRepresentativeAttachment($event)">
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-12">
                  <div class="alert alert-danger mt-3" role="alert" *ngIf="!validateRuc()">
                    <label class="col-12 text-justify"><strong>Atención</strong><br />
                      La información proporcionada del RUC presenta errores o es incompleta.
                    </label>
                  </div>
                </div>
              </div>
              <div class="row mt-3" *ngIf="validateRuc()">
                <div class="col-12 text-center">
                  <button [disabled]="guardando" type="button" class="btn btn-success" title="Guardar Datos"
                    (click)="guardarRUC()">
                    <i class="fas fa-save"></i>&nbsp;Guardar Datos
                  </button>
                  <button type="button" class="btn btn-danger ml-2" title="Cancelar Cambios" (click)="
                        refresh()
                      ">
                    <i class="fas fa-trash"></i>&nbsp;Cancelar Cambios
                  </button>
                  <button *ngIf="this.ruc_registro_selected.ruc.id !== 0" type="button" class="btn btn-info ml-2" title="Siguiente"
                    (click)="pasosSuperiores.select('tab2')">
                    <i class="fas fa-arrow-right"></i>&nbsp;Siguiente
                  </button>
                </div>
              </div>
            </ng-template>
          </ngb-tab>
          <ngb-tab title="Paso II. Información del Establecimiento" id="tab2" *ngIf="rucSaved() && SRIOK">
            <ng-template ngbTabContent>
              <div class="row mt-3">
                <h4 class="col-12">
                  <strong>Listado de Establecimientos Inscritos en el RUC*</strong>
                </h4>
                <div class="col-12">
                  <div class="alert alert-info mt-2 mb-2" role="alert">
                    <label class="col-12 text-justify"><strong>Atención</strong></label><br />
                    A continuación se detalla el listado de los establecimientos que se encuentran vinculados a su RUC, por favor para iniciar el proceso dar click en el establecimiento que desea tramitar.
                  </div>
                </div>
              </div>
              <div class="row mt-2">
                <div class="col-12">
                  <div class="btn-toolbar" role="toolbar">
                    <div class="btn-group mr-2" role="group">
                      <button type="button" class="btn btn-primary" title="Actualizar" (click)="
                        getEstablishmentsOnRuc(currentPageEstablishment)
                        ">
                        <i class="fas fa-sync"></i>
                      </button>
                    </div>
                    <div class="input-group">
                      <div class="input-group-prepend">
                        <button type="button" class="input-group-text btn btn-success" title="Buscar" (click)="
                        onChangeTableEstablishment(config)
                          ">
                          <span class="fas fa-search"></span>
                        </button>
                      </div>
                      <input *ngIf="config.filtering" placeholder="Buscar..."
                        [ngTableFiltering]="config.filtering"
                        class="form-control"
                        (input)="onChangeTableEstablishment(config)"/>
                    </div>
                  </div>
                </div>
              </div>
              <div style="width: 100%; overflow-x: auto;">
                  <div class="row">
                      <div class="col-12 mt-2">
                         <ng-table
                            [config]="config"
                            (cellClicked)="onCellClickEstablishment($event)"
                            (tableChanged)="onChangeTableEstablishment(config)"
                            [rows]="rowsEstablishment"
                            [columns]="columnsEstablishment">
                          </ng-table>
                      </div>
                    </div>
              </div>
              <div class="row">
                <div class="col-12">
                  <ngb-pagination
                    *ngIf="config.paging"
                    [(page)]="currentPageEstablishment"
                    [pageSize]="recordsByPageEstablishment"
                    [maxSize]="10"
                    [boundaryLinks]="true"
                    (pageChange)="onChangeTableEstablishment(config, $event)"
                    [collectionSize]="ruc_registro_selected.ruc.establishments.length">
                    <ng-template ngbPaginationFirst>Primera</ng-template>
                    <ng-template ngbPaginationPrevious>Anterior</ng-template>
                    <ng-template ngbPaginationNext>Siguiente</ng-template>
                    <ng-template ngbPaginationLast>Última</ng-template>
                  </ngb-pagination>
                </div>
              </div>
              <ngb-tabset *ngIf="establishment_selected.ruc_code_id !== '-'" #pasos (tabChange)="changeTabActive($event)">
                  <ngb-tab title="Paso 1.- Datos Generales del Establecimiento" id="paso1" #paso1>
                    <ng-template ngbTabContent>
                        <div class="row" *ngIf="mostrarDataEstablishment">
                            <div class="col-12">
                              <div class="row mt-5">
                                <div class="col-12 text-left">
                                  <h4><strong>Datos Generales del Establecimiento:</strong></h4>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-12">
                                  <div class="row">
                                      <div class="col-12">
                                        <div class="form-group">
                                          <label>Nombre Comercial*</label><span *ngIf="!establishmentComercialNameValidated"
                                            class="ml-2 badge badge-danger">Incorrecto</span>
                                          <input type="text" class="form-control" id="commercially_known_name"
                                            name="commercially_known_name" (keyup)="validateNombreComercial()"
                                            placeholder="Nombre Comercial" [(ngModel)]="
                                              establishment_selected.commercially_known_name
                                            " [disabled]="!rucEstablishmentRegisterSelected.editable"/>
                                        </div>
                                      </div>
                                    </div>
                                  <div class="row">
                                    <div class="col-3">
                                      <div class="form-group">
                                        <label>Tipo de Establecimiento</label><span
                                          *ngIf="establishment_selected.ruc_name_type_id == 0"
                                          class="ml-2 badge badge-danger">Incorrecto</span><span class="badge badge-info ml-2" *ngIf="selectedNameType.id > 1" placement="right" ngbPopover="{{selectedNameType.description}}" popoverTitle="{{selectedNameType.name}}"><i class="fas fa-question-circle"></i></span>
                                        <select class="form-control" id="comercial_name_type_id" name="comercial_name_type_id"
                                          [(ngModel)]="establishment_selected.ruc_name_type_id" (change)="getNameTypeInfo()" [disabled]="!rucEstablishmentRegisterSelected.editable">
                                          <option value="0" selected>Seleccione...</option>
                                          <option *ngFor="
                                          let ruc_name_type of ruc_name_types
                                        " value="{{ ruc_name_type.id }}">
                                            {{ ruc_name_type.name }}
                                          </option>
                                        </select>
                                      </div>
                                    </div>
                                    <div class="col-9" *ngIf="establishment_selected.ruc_name_type_id > 1">
                                      <div class="form-group">
                                        <label>Nombre de la Franquicia o Cadena*</label><span *ngIf="!franchiseChainNameValidated"
                                          class="ml-2 badge badge-danger">Incorrecto</span>
                                        <input type="text" class="form-control" id="franchise_chain_name"
                                          name="franchise_chain_name" (keyup)="validateNombreFranquiciaCadena()"
                                          placeholder="Nombre de la Franquicia o Cadena" [(ngModel)]="
                                            establishment_selected.franchise_chain_name
                                          " [disabled]="!rucEstablishmentRegisterSelected.editable"/>
                                      </div>
                                    </div>
                                  </div>
                                  <div class="form-group">
                                    <label>Su local es*</label><span *ngIf="
                                        establishment_selected.establishment_property_type_id == 0
                                      " class="ml-2 badge badge-danger">Incorrecto</span>
                                    <select class="form-control" id="establishment_property_type_id"
                                      name="establishment_property_type_id" [(ngModel)]="
                                        establishment_selected.establishment_property_type_id
                                      " [disabled]="!rucEstablishmentRegisterSelected.editable">
                                      <option value="0" selected>Seleccione...</option>
                                      <option *ngFor="
                                          let establishment_property_type of establishment_property_types
                                        " value="{{ establishment_property_type.id }}">
                                        {{ establishment_property_type.name }}
                                      </option>
                                    </select>
                                  </div>
                                  <div class="form-group">
                                    <label>Dirección URL de la Página WEB</label><span *ngIf="!urlwebEstablishmentValidated"
                                      class="ml-2 badge badge-danger">Incorrecto</span>
                                    <input type="text" class="form-control" id="url_web" name="url_web" (keyup)="checkURLWeb()"
                                      placeholder="Ejemplo: www.google.com" [disabled]="!rucEstablishmentRegisterSelected.editable" [(ngModel)]="establishment_selected.url_web" />
                                  </div>
                                  <div class="row">
                                    <div class="col-12">
                                      <div class="form-group">
                                        <label>Fotografía de la Fachada del Establecimiento*</label><span *ngIf="establishment_selected_picture.establishment_picture_file === ''"
                                        class="ml-2 badge badge-danger">Incorrecto</span>
                                      </div>
                                    </div>
                                    <div class="col-12 text-center">
                                      <img class="rounded mb-2" *ngIf="establishment_selected_picture.establishment_picture_file !== '' && !rucEstablishmentRegisterSelected.editable" src="data:{{
                                          establishment_selected_picture.establishment_picture_file_type
                                        }};base64,{{
                                          establishment_selected_picture.establishment_picture_file
                                        }}" height="400px" width="600px" />
                                      <img class="rounded mb-2" *ngIf="establishment_selected_picture.establishment_picture_file !== '' && rucEstablishmentRegisterSelected.editable" src="data:{{
                                          establishment_selected_picture.establishment_picture_file_type
                                        }};base64,{{
                                          establishment_selected_picture.establishment_picture_file
                                        }}" height="400px" width="600px" (click)="subirFotoFachada()" />
                                    </div>
                                    <div class="col-12 text-center" *ngIf="rucEstablishmentRegisterSelected.editable">
                                      <button type="button" class="btn btn-primary" (click)="subirFotoFachada()">
                                        Subir Fotografía
                                      </button>
                                      <input [hidden]="true" #fotoFachadaInput type="file" (change)="CodificarArchivo($event)"
                                        accept="image/*" />
                                    </div>
                                  </div>
                                  <div class="row mt-5">
                                    <div class="col-12 text-left">
                                      <h4><strong>Personal del Establecimiento:</strong></h4>
                                    </div>
                                  </div>
                                    <div class="form-group row">
                                      <div class="col-12">
                                        <div class="alert alert-info mt-2 mb-2" role="alert">
                                          <label class="col-12 text-justify"><strong>Atención</strong></label><br />
                                          Verifíque que los valores ingresados sean números enteros.
                                        </div>
                                      </div>
                                      <div class="col-12">
                                        <div class="form-group">
                                          <table class="table table-hover mt-2">
                                            <thead>
                                              <th>
                                                Género
                                              </th>
                                              <th>
                                                Grupo
                                              </th>
                                              <th>
                                                Cantidad
                                              </th>
                                            </thead>
                                            <tbody>
                                              <tr *ngFor="let worker of establishment_selected.workers_on_establishment">
                                                <td>
                                                  {{worker.gender_name}}
                                                </td>
                                                <td>
                                                  <strong *ngIf="worker.is_max">{{worker.worker_group_name}}</strong>
                                                  <label *ngIf="!worker.is_max">{{worker.worker_group_name}}</label>
                                                </td>
                                                <td>
                                                  <input type="number" class="form-control" min="0" id="worker-count"
                                                    name="worker-count" [disabled]="!rucEstablishmentRegisterSelected.editable" placeholder="Cantidad" [(ngModel)]="worker.count" (keyup)="refreshTotalWorkers()"/>
                                                </td>
                                              </tr>
                                            </tbody>
                                            <thead>
                                              <th>
                                              </th>
                                              <th>
                                                TOTAL DE TRABAJADORES DEL ESTABLECIMIENTO
                                              </th>
                                              <th>
                                                {{total_workers}}
                                              </th>
                                            </thead>
                                          </table>
                                        </div>
                                      </div>
                                    </div>
                                  <div class="row mt-5">
                                    <div class="col-12 text-left">
                                      <h4><strong>Datos de Ubicación del Establecimiento:</strong></h4>
                                    </div>
                                  </div>
                                  <div class="row mt-2">
                                    <label class="col-12"><strong>Ubicación</strong></label>
                                    <div class="col-3" [hidden]="true">
                                      <div class="form-group">
                                        <label>Zonal</label>
                                        <select class="form-control" disabled id="zonal_establishment_id"
                                          name="zonal_establishment_id" [(ngModel)]="zonalEstablishmentSelectedCode">
                                          <option value="-" selected>Seleccione...</option>
                                          <option *ngFor="let zonal of zonalesEstablishment" value="{{ zonal.code }}">
                                            {{ zonal.name }}
                                          </option>
                                        </select>
                                      </div>
                                    </div>
                                    <div class="col-4">
                                      <div class="form-group">
                                        <label>Provincia*</label>
                                        <select class="form-control" id="provincia_establishment_id"
                                          name="provincia_establishment_id" [(ngModel)]="provinciaEstablishmentSelectedCode"
                                          (change)="getCantonesEstablishment()" [disabled]="!rucEstablishmentRegisterSelected.editable">
                                          <option value="-" selected>Seleccione...</option>
                                          <option *ngFor="
                                              let provincia of provinciasEstablishment
                                            " value="{{ provincia.code }}">
                                            {{ provincia.name }}
                                          </option>
                                        </select>
                                      </div>
                                    </div>
                                    <div class="col-4">
                                      <div class="form-group">
                                        <label>Cantón*</label>
                                        <select class="form-control" id="canton_establishment_id" name="canton_establishment_id"
                                          [(ngModel)]="cantonEstablishmentSelectedCode" (change)="getParroquiasEstablishment()" [disabled]="!rucEstablishmentRegisterSelected.editable">
                                          <option value="-" selected>Seleccione...</option>
                                          <option *ngFor="let canton of cantonesEstablishment" value="{{ canton.code }}">
                                            {{ canton.name }}
                                          </option>
                                        </select>
                                      </div>
                                    </div>
                                    <div class="col-4">
                                      <div class="form-group">
                                        <label>Parroquia*</label><span *ngIf="establishment_selected.ubication_id == 0"
                                          class="ml-2 badge badge-danger">Incorrecto</span>
                                        <select class="form-control" id="parroquia_establishment_id"
                                          name="parroquia_establishment_id" [(ngModel)]="establishment_selected.ubication_id" [disabled]="!rucEstablishmentRegisterSelected.editable">
                                          <option value="0" selected>Seleccione...</option>
                                          <option *ngFor="
                                              let parroquia of parroquiasEstablishment
                                            " value="{{ parroquia.id }}">
                                            {{ parroquia.name }}
                                          </option>
                                        </select>
                                      </div>
                                    </div>
                                  </div>
                                  <div class="row mt-2">
                                    <label class="col-12"><strong>Dirección*</strong></label><span *ngIf="!addressEstablishmentValidated"
                                    class="ml-2 badge badge-danger">Incorrecto</span>
                                  </div>
                                  <div class="row mt-2">
                                    <div class="col-4">
                                        <div class="form-group">
                                            <label>Calle Principal</label><span *ngIf="establishment_selected.address_main_street === ''"
                                            class="ml-2 badge badge-danger">Incorrecto</span>
                                            <input type="text" class="form-control" id="addressMain" name="addressMain"
                                              (keyup)="checkEstablishmentAddress()" [disabled]="!rucEstablishmentRegisterSelected.editable"
                                              placeholder="Calle Principal"
                                              [(ngModel)]="establishment_selected.address_main_street" />
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="form-group">
                                            <label>Numeración</label><span *ngIf="establishment_selected.address_number === ''"
                                            class="ml-2 badge badge-danger">Incorrecto</span>
                                            <input type="text" class="form-control" id="addressNumber" name="addressNumber"
                                              (keyup)="checkEstablishmentAddress()" [disabled]="!rucEstablishmentRegisterSelected.editable"
                                              placeholder="Numeración"
                                              [(ngModel)]="establishment_selected.address_number" />
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="form-group">
                                            <label>Calle Intersección</label><span *ngIf="establishment_selected.address_secondary_street === ''"
                                            class="ml-2 badge badge-danger">Incorrecto</span>
                                            <input type="text" class="form-control" id="addressSecondary" name="addressSecondary"
                                              (keyup)="checkEstablishmentAddress()" [disabled]="!rucEstablishmentRegisterSelected.editable"
                                              placeholder="Calle Intersección"
                                              [(ngModel)]="establishment_selected.address_secondary_street" />
                                        </div>
                                    </div>
                                  </div>
                                  <div class="form-group">
                                    <label>Referencia de Ubicación* - ¿Como llegar?</label><span
                                      *ngIf="establishment_selected.address_reference == ''"
                                      class="ml-2 badge badge-danger">Incorrecto</span>
                                    <ck-editor id="address_reference" *ngIf="rucEstablishmentRegisterSelected.editable" name="address_reference" skin="moono-lisa"
                                      [(ngModel)]="establishment_selected.address_reference"></ck-editor>
                                    <ck-editor id="address_reference" [readonly]="true" *ngIf="!rucEstablishmentRegisterSelected.editable" name="address_reference" skin="moono-lisa"
                                      [(ngModel)]="establishment_selected.address_reference"></ck-editor>
                                  </div>
                                  <div class="form-group">
                                    <label>Ubicar el establecimiento en el mapa*</label>
                                    <agm-map class="col-12" *ngIf="rucEstablishmentRegisterSelected.editable" style="height: 400px;" [latitude]="
                                        establishment_selected.address_map_latitude * 1
                                      " [longitude]="
                                        establishment_selected.address_map_longitude * 1
                                      " [zoom]="15" (mapClick)="address_mapEventEstablishment($event)">
                                      <agm-marker [latitude]="
                                          establishment_selected.address_map_latitude * 1
                                        " [longitude]="
                                          establishment_selected.address_map_longitude * 1
                                        " [markerDraggable]="true" (dragEnd)="address_mapEventEstablishment($event)"
                                        [animation]="'DROP'"></agm-marker>
                                    </agm-map>

                                    <agm-map class="col-12" *ngIf="!rucEstablishmentRegisterSelected.editable" style="height: 400px;" [latitude]="
                                        establishment_selected.address_map_latitude * 1
                                      " [longitude]="
                                        establishment_selected.address_map_longitude * 1
                                      " [zoom]="15">
                                      <agm-marker [latitude]="
                                          establishment_selected.address_map_latitude * 1
                                        " [longitude]="
                                          establishment_selected.address_map_longitude * 1
                                        "
                                        [animation]="'DROP'"></agm-marker>
                                    </agm-map>
                                  </div>
                                  <div class="row mt-5">
                                    <div class="col-12 text-left">
                                      <h4><strong>Certificaciones:</strong></h4>
                                    </div>
                                  </div>
                                  <div class="form-group row">
                                    <div class="col-12">
                                      <div class="alert alert-info mt-2 mb-2" role="alert">
                                        <label class="col-12 text-justify"><strong>Atención</strong></label><br />
                                        Si usted dispone alguna de las certificaciones reconocidas por el Ministerio de Turismo, por favor adjunte el digitalizado correspondiente. <br/>
                                        Asegúrese que la calidad sea la adecuada para su revisión.
                                      </div>
                                    </div>
                                    <div class="col-12">
                                      <table class="table table-hover mt-2">
                                        <thead>
                                          <th>
                                            Seleccionado
                                            <button type="button" title="Agregar" class="btn btn-success ml-2"
                                              (click)="addEstablishmentCertification()">
                                              <i class="fas fa-plus-circle"></i>
                                            </button>
                                          </th>
                                          <th>
                                            Categoría de Certificado
                                          </th>
                                          <th>
                                            Tipo de Certificado
                                          </th>
                                          <th *ngIf="false">
                                            Adjunto
                                          </th>
                                          <th>
                                            Opciones
                                          </th>
                                        </thead>
                                        <tbody>
                                          <tr *ngFor="
                                              let establishment_certification of establishment_selected.establishment_certifications_on_establishment
                                            " (click)="
                                              selectEstablishmentCertification(
                                                establishment_certification
                                              )
                                            ">
                                            <td class="text-right">
                                              <span *ngIf="
                                                  establishment_certifications_establishmentSelected ===
                                                  establishment_certification
                                                " class="far fa-hand-point-right"></span>
                                            </td>
                                            <td>
                                              <select class="form-control" id="certificate_type_id" name="certificate_type_id"
                                                [(ngModel)]="
                                                  establishment_certification.establishment_certification_type_fatherCode
                                                " [disabled]="!rucEstablishmentRegisterSelected.editable" (change)="
                                                  getEstablishmentCertificationTypesSpecific(establishment_certification)
                                                ">
                                                <option value="-" selected>Seleccione...</option>
                                                <option *ngFor="
                                                    let establishment_certification_type of establishment_certification_types_categories
                                                  " value="{{
                                                    establishment_certification_type.code
                                                  }}">
                                                  {{
                                                    establishment_certification_type.name
                                                  }}
                                                </option>
                                              </select>
                                            </td>
                                            <td>
                                              <select class="form-control" id="certificate_type_id" name="certificate_type_id"
                                                [(ngModel)]="
                                                  establishment_certification.establishment_certification_type_id
                                                " [disabled]="!rucEstablishmentRegisterSelected.editable">
                                                <option value="0" selected>Seleccione...</option>
                                                <option *ngFor="
                                                    let establishment_certification_type of establishment_certification.establishment_certification_type_specifics
                                                  " value="{{
                                                    establishment_certification_type.id
                                                  }}">
                                                  {{
                                                    establishment_certification_type.name
                                                  }}
                                                </option>
                                              </select>
                                            </td>
                                            <td *ngIf="false">
                                              <div class="input-group">
                                                <div class="input-group-prepend">
                                                  <button
                                                    [disabled]="establishment_certification.establishment_certification_attachment.establishment_certification_attachment_file == ''"
                                                    type="button" title="Descargar Certificado" class="btn btn-primary" (click)="
                                                          downloadEstablishmentCertification(
                                                            establishment_certification
                                                          )
                                                        ">
                                                    <i class="fas fa-download"></i>
                                                  </button>
                                                  <button
                                                    [disabled]="establishment_certification.establishment_certification_attachment.establishment_certification_attachment_file == '' || !rucEstablishmentRegisterSelected.editable"
                                                    type="button" title="Eliminar" class="btn btn-danger"
                                                    (click)="borrarCertificado(establishment_certification)">
                                                    <i class="fas fa-trash"></i>
                                                  </button>
                                                </div>
                                                <input type="file" [disabled]="!rucEstablishmentRegisterSelected.editable" class="form-control" (change)="
                                                      CodificarArchivoEstablishmentCertification(
                                                        $event,
                                                        establishment_certification
                                                      )
                                                    " accept="application/pdf" />
                                              </div>
                                            </td>
                                            <td>
                                              <button type="button" title="Eliminar" class="btn btn-danger" [disabled]="!rucEstablishmentRegisterSelected.editable" (click)="
                                                  removeEstablishmentCertification(
                                                    establishment_certification
                                                  )
                                                ">
                                                <i class="fas fa-trash"></i>
                                              </button>
                                            </td>
                                          </tr>
                                        </tbody>
                                      </table>
                                    </div>
                                  </div>
                                  <div class="row mt-3">
                                      <h4 class="col-12"><strong>Persona de Contacto en el Establecimiento</strong></h4>
                                      <div class="col-12">
                                        <div class="row">
                                          <div class="col-12">
                                            <div class="form-group">
                                              <label>Cédula de Identidad*</label><span
                                                *ngIf="!identificationContactEstablishmentValidated"
                                                class="ml-2 badge badge-danger">Incorrecto</span>
                                              <div class="input-group mb-3">
                                                <div class="input-group-prepend">
                                                  <button type="button" class="btn btn-primary" title="Consultar con Registro Civil"
                                                    (click)="checkCedulaEstablishment()">
                                                    <i class="fas fa-sync"></i>
                                                  </button>
                                                </div>
                                                <input type="text" class="form-control" id="cedula" maxlength="10"
                                                  placeholder="Cédula de Identidad" [disabled]="!rucEstablishmentRegisterSelected.editable" (keyup)="checkCedulaEstablishment()" [(ngModel)]="
                                                    establishment_selected.contact_user
                                                      .identification
                                                  " name="cedula" />
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-12" *ngIf="identificationContactEstablishmentValidated">
                                            <div class="form-group">
                                              <label>DATOS DE LA CÉDULA</label>
                                              <div class="col-12 text-justify" [innerHTML]="cedulaEstablishmentContactData">
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                        <div class="row mt-2">
                                          <div class="col-6">
                                            <div class="form-group">
                                              <label>Número de Teléfono Principal*</label><span
                                                *ngIf="!mainPhoneContactEstablishmentValidated"
                                                class="ml-2 badge badge-danger">Incorrecto</span>
                                              <input type="text" class="form-control" [disabled]="!rucEstablishmentRegisterSelected.editable" id="mainRucPhoneNumber" maxlength="10"
                                                placeholder="Número de Teléfono Principal Ej: 0999999999"
                                                (keyup)="checkTelefonoPrincipalContactoEstablecimiento()" [(ngModel)]="
                                                  establishment_selected.contact_user.main_phone_number
                                                " name="mainRucPhoneNumber" />
                                            </div>
                                          </div>
                                          <div class="col-6">
                                            <div class="form-group">
                                              <label>Número de Teléfono Secundario</label><span
                                                *ngIf="!secondaryPhoneContactEstablishmentValidated"
                                                class="ml-2 badge badge-danger">Incorrecto</span>
                                              <input type="text" class="form-control" [disabled]="!rucEstablishmentRegisterSelected.editable" id="secondaryRucPhone" maxlength="10"
                                                (keyup)="checkTelefonoSecundarioContactoEstablecimiento()"
                                                placeholder="Número de Teléfono Secundario Ej: 0299999999" [(ngModel)]="
                                                  establishment_selected.contact_user.secondary_phone_number
                                                " name="secondaryRucPhone" />
                                            </div>
                                          </div>
                                        </div>
                                        <div class="row">
                                          <div class="col-12">
                                            <div class="form-group">
                                              <label>Correo Electrónico*</label><span *ngIf="!emailContactEstablishmentValidated"
                                                class="ml-2 badge badge-danger">Incorrecto</span>
                                              <input type="email" class="form-control" [disabled]="!rucEstablishmentRegisterSelected.editable" id="email" maxlength="255"
                                                (keyup)="checkEmailContactEstablishment()" placeholder="Correo Electrónico"
                                                [(ngModel)]="establishment_selected.contact_user.email" name="email" />
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="row mt-3" *ngIf="validateEstablecimiento() && rucEstablishmentRegisterSelected.editable">
                            <div class="col-12 text-center">
                              <button *ngIf="establishment_selected.id !== 0" type="button" class="btn btn-info mr-2" title="Anterior"
                                (click)="pasosSuperiores.select('tab1')">
                                <i class="fas fa-arrow-left"></i>&nbsp;Anterior
                              </button>
                              <button type="button" [disabled]="guardando" class="btn btn-success"
                                title="Guardar Datos" (click)="guardarEstablecimiento()">
                                <i class="fas fa-save"></i>&nbsp;Guardar Datos
                              </button>
                              <button type="button" class="btn btn-danger ml-2" title="Cancelar Cambios" (click)="
                                  refresh()
                                ">
                                <i class="fas fa-trash"></i>&nbsp;Cancelar Cambios
                              </button>
                              <button *ngIf="establishment_selected.id !== 0" type="button" class="btn btn-info ml-2" title="Siguiente"
                              (click)="pasos.select('paso2')">
                                <i class="fas fa-arrow-right"></i>&nbsp;Siguiente
                              </button>
                            </div>
                          </div>
                    </ng-template>
                  </ngb-tab>
                <ngb-tab title="Paso 2.- Declaración de la Contribución Uno por Mil" id="paso2" *ngIf="establishment_declarations_selected.id !== 0">
                  <ng-template ngbTabContent>
                      <div class="row mt-5">
                          <div class="col-12">
                            <Strong><h4>Órdenes de Pagos</h4></Strong>
                          </div>
                      </div>
                        <div class="row">
                          <div class="col-12">
                              <div class="btn-toolbar" role="toolbar">
                                <div class="btn-group mr-2" role="group">
                                    <button type="button" class="btn btn-primary" title="Actualizar" (click)="onChangeTablePays(config)"><i class="fas fa-sync"></i></button>
                                </div>
                                <div class="btn-group mr-2" role="group">
                                  <input *ngIf="config.filtering" placeholder="Buscar..."
                                      [ngTableFiltering]="config.filtering"
                                      class="form-control"
                                      (input)="onChangeTablePays(config)"/>
                                </div>
                              </div>
                          </div>
                        </div>
                        <div style="width: 100%; overflow-x: auto;">
                            <div class="row">
                                <div class="col-12 mt-2">
                                    <ng-table
                                      [config]="config"
                                      (cellClicked)="onCellClickPays($event)"
                                      (tableChanged)="onChangeTablePays(config)"
                                      [rows]="rowsPays"
                                      [columns]="columnsPays">
                                    </ng-table>
                                </div>
                              </div>
                        </div>
                        <div class="row">
                          <div class="col-12">
                            <ngb-pagination
                              *ngIf="config.paging"
                              [(page)]="currentPagePays"
                              [pageSize]="recordsByPagePays"
                              [maxSize]="10"
                              [boundaryLinks]="true"
                              (pageChange)="onChangeTablePays(config, $event)"
                              [collectionSize]="pays.length">
                              <ng-template ngbPaginationFirst>Primera</ng-template>
                              <ng-template ngbPaginationPrevious>Anterior</ng-template>
                              <ng-template ngbPaginationNext>Siguiente</ng-template>
                              <ng-template ngbPaginationLast>Última</ng-template>
                            </ngb-pagination>
                          </div>
                        </div>
                    <div class="row mt-5" *ngIf="establishment_declarations_selected.id !== 0">
                      <div class="col-12">
                        <div class="row mt-3">
                          <h4 class="col-12">
                            <strong>Declaraciones de Impuestos</strong>
                          </h4>
                        </div>
                        <div class="row">
                          <div class="col-12">
                            <div class="btn-toolbar" role="toolbar">
                              <div class="btn-group mr-2" role="group">
                                <button type="button" class="btn btn-primary" title="Actualizar" (click)="
                                refreshDeclaracion()
                                  ">
                                  <i class="fas fa-sync"></i>
                                </button>
                              </div>
                              <div class="btn-group mr-2" role="group">
                                <button type="button" title="Nuevo" class="btn btn-success" (click)="newDeclaration()">
                                  <i class="fas fa-file"></i>
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-12">
                            <table class="table table-hover mt-2">
                              <thead>
                                <tr>
                                  <th>Seleccionado</th>
                                  <th>Año</th>
                                  <th>Fecha de Declaración</th>
                                  <th>Estado</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr *ngFor="let declaration of declarations" (click)="selectDeclaration(declaration)">
                                  <td class="text-right">
                                    <span *ngIf="declaration_selected === declaration" class="far fa-hand-point-right"></span>
                                  </td>
                                  <td>{{declaration.year}}</td>
                                  <td>{{declaration.declaration_date}}</td>
                                  <td>{{declaration.status_name}}</td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div *ngIf="mostrarDataDeclaration">
                      <div class="row mt-5">
                        <div class="col-12 text-left">
                          <h3>Datos de la Declaración:</h3>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-12">
                          <div class="form-group">
                            <label>Año de Obligación de Pago</label>
                            <input type="number" class="form-control" id="declarationYear" name="declarationYear"
                              placeholder="Año a Declarar" [(ngModel)]="declaration_selected.year" [max]="maxYear" [disabled]="!declaration_selected.editable">
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-12">
                          <table class="table table-hover mt-2">
                            <tbody *ngFor="let declarationItemToShow of declarationItemsToShow">
                              <tr class="text-light bg-secondary">
                                <th colspan="2" class="text-center">
                                  {{ declarationItemToShow.Category.name }}
                                </th>
                              </tr>
                              <tr>
                                <th>
                                  Nombre
                                </th>
                                <th>
                                  Valor
                                </th>
                              </tr>
                              <tr *ngFor="let item of declarationItemToShow.items">
                                <td>
                                  {{ item.declarationItem.name }}
                                </td>
                                <td>
                                  <div class="input-group">
                                    <div class="input-group-prepend">
                                      <span class="input-group-text">USD</span>
                                    </div>
                                    <input type="number" class="form-control" min="0" step="0.01" id="declarationITemValue"
                                      name="declarationITemValue" [(ngModel)]="item.valueItem.value"
                                      placeholder="Valor" [disabled]="!declaration_selected.editable"/>
                                  </div>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                    <div class="row mt-3" *ngIf="mostrarDataDeclaration">
                      <div class="col-12">
                          <div class="form-group">
                              <label *ngIf="ruc_registro_selected.ruc.tax_payer_type_id == 2">Anexar balance individual del establecimiento, suscrito por el representante legal*</label>
                              <label *ngIf="ruc_registro_selected.ruc.tax_payer_type_id == 1">Anexar inventario valorado del establecimiento, suscrito por el propietario*</label>
                              <span
                                *ngIf="balance.declaration_attachment_file === ''"
                                class="ml-2 badge badge-danger">Incorrecto</span>
                              <div class="input-group">
                                <div class="input-group-prepend">
                                  <button
                                    [disabled]="balance.declaration_attachment_file === ''"
                                    type="button" title="Descargar Adjunto" class="btn btn-primary" (click)="
                                          downloadBalance()
                                        ">
                                    <i class="fas fa-download"></i>
                                  </button>
                                  <button
                                    [disabled]="balance.declaration_attachment_file === ''"
                                    type="button" title="Eliminar" class="btn btn-danger"
                                    (click)="borrarBalance()">
                                    <i class="fas fa-trash"></i>
                                  </button>
                                </div>
                                <input type="file" class="form-control" (change)="
                                      CodificarArchivoBalance(
                                        $event
                                      )
                                    " accept="application/pdf" />
                              </div>
                          </div>
                      </div>
                    </div>
                    <div class="row mt-3" *ngIf="mostrarDataDeclaration">
                      <div class="col-12">
                        <div class="alert alert-warning mt-2 mb-2" role="alert">
                          <label class="col-12 text-justify"><strong>Declaración Juramentada</strong></label><br />
                          Declaro bajo juramento que los datos consignados en el presente formulario reflejan la realidad y autorizo al Ministerio de Turismo a verificar el contenido de esta declaración en cualquier momento, al tiempo que me sujeto, a las sanciones previstas en la ley en caso de falsedad o perjurio.
                        </div>
                      </div>
                      <div class="col-12 text-center">
                        <button [disabled]="guardando || !declaration_selected.editable" type="button" class="btn btn-success"
                          title="Guardar Datos" (click)="guardarDeclaracion()">
                          <i class="fas fa-paper-plane"></i>&nbsp;Guardar Datos
                        </button>
                        <button type="button" class="btn btn-danger ml-2" title="Cancelar Cambios" (click)="
                            refresh()
                          ">
                          <i class="fas fa-trash"></i>&nbsp;Cancelar Cambios
                        </button>
                      </div>
                    </div>
                    <div class="col-12 text-center">
                      <button *ngIf="establishment_selected.id !== 0" type="button" class="btn btn-info mr-2" title="Anterior"
                        (click)="pasos.select('paso1')">
                        <i class="fas fa-arrow-left"></i>&nbsp;Anterior
                      </button>
                      <button *ngIf="establishment_selected.id !== 0" type="button" class="btn btn-info ml-2" title="Siguiente"
                      (click)="pasos.select('paso3')">
                        <i class="fas fa-arrow-right"></i>&nbsp;Siguiente
                      </button>
                    </div>
                  </ng-template>
                </ngb-tab>
                <ngb-tab title="Paso 3.- Información Turística del Establecimiento" id="paso3"
                  *ngIf="rucSaved() && SRIOK && declarations.length > 0">
                  <ng-template ngbTabContent>
                    <div class="row" *ngIf="mostrarDataRegister">
                      <div class="col-12">
                        <div class="row mt-3">
                            <h4 class="col-12">
                              <strong>Cumplimiento de Requisitos del Establecimiento</strong>
                            </h4>
                          </div>
                      </div>
                      <div class="col-12">
                        <div class="row">
                          <div class="col-12" *ngIf="estado_tramite_selected_code == 9">
                            <div class="row">
                              <div class="col-4">
                                <div class="form-group">
                                  <label>Código de Seguridad QR</label>
                                  <ngx-qrcode *ngIf="rucEstablishmentRegisterSelected.code != ''" [qrc-element-type]="'url'"
                                    [qrc-value]="rucEstablishmentRegisterSelected.code" qrc-class="aclass"
                                    qrc-errorCorrectionLevel="L">
                                  </ngx-qrcode>
                                </div>
                              </div>
                              <div class="col-8">
                                <div class="form-group">
                                  <label>Código de Barras</label>
                                  <ngx-barcode *ngIf="rucEstablishmentRegisterSelected.code != ''"
                                    [bc-value]="rucEstablishmentRegisterSelected.code" [bc-display-value]="true">
                                  </ngx-barcode>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="col-12">
                            <div class="row">
                              <div class="col-3">
                                <div class="form-group">
                                  <label>Estado del Trámite</label>
                                  <select disabled class="form-control" id="tramite_state_name" name="tramite_state_name"
                                    (change)="getSpecificStates()" [(ngModel)]="estado_tramite_selected_code">
                                    <option value="-" selected>Seleccione...</option>
                                    <option *ngFor="
                                      let state of estados_tramites
                                    " value="{{ state.code }}">
                                      {{ state.name }}
                                    </option>
                                  </select>
                                </div>
                              </div>
                              <div class="col-3">
                                <div class="form-group">
                                  <label>Trámite Requerido</label><span *ngIf="rucEstablishmentRegisterSelected.status == 0"
                                    class="ml-2 badge badge-danger">Incorrecto</span>
                                  <select class="form-control" disabled id="state_name" name="state_name"
                                    [(ngModel)]="rucEstablishmentRegisterSelected.status" (change)="changeTramiteRequerido()" [disabled]="!editableTramiteRequerido()">
                                    <option value="0" selected>Seleccione...</option>
                                    <option *ngFor="
                                        let state of specific_states
                                      " value="{{ state.id }}">
                                      {{ state.name }}
                                    </option>
                                  </select>
                                </div>
                              </div>
                              <div class="col-3">
                                <div class="form-group">
                                  <label for="code">Número de Registro</label>
                                  <input disabled type="text" class="form-control" id="code" name="code"
                                    placeholder="Número de Registro" [(ngModel)]="
                                      rucEstablishmentRegisterSelected.code
                                    "/>
                                </div>
                              </div>
                              <div class="col-3">
                                <div class="form-group">
                                  <label>Fecha de Registro</label>
                                  <input disabled type="date" *ngIf="establishment_selected.as_turistic_register_date != null" class="form-control" id="registerDate" name="registerDate"
                                    placeholder="Fecha de Registro" [ngModel]="
                                    establishment_selected.as_turistic_register_date | date: 'y-MM-dd'
                                  " (ngModelChange)="
                                  establishment_selected.as_turistic_register_date = $event
                                  "/>
                                </div>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-3">
                                <div class="form-group">
                                  <label>Región</label>
                                  <select class="form-control" disabled id="register_type_id" name="register_type_id"
                                    (change)="getClasifications()" [(ngModel)]="regionSelectedCode" [disabled]="!rucEstablishmentRegisterSelected.editable">
                                    <option value="-" selected>Seleccione...</option>
                                    <option *ngFor="
                                        let register_type of regiones
                                      " value="{{ register_type.code }}">
                                      {{ register_type.name }}
                                    </option>
                                  </select>
                                </div>
                              </div>
                              <div class="col-3">
                                <div class="form-group">
                                  <label>Actividad Turística</label><span *ngIf="actividadSelected == '-'"
                                    class="ml-2 badge badge-danger">Incorrecto</span>
                                  <select class="form-control" id="actividad" name="actividad" [(ngModel)]="actividadSelected" [disabled]="!rucEstablishmentRegisterSelected.editable">
                                    <option value="-" selected>Seleccione...</option>
                                    <option value="1" selected>Alojamiento Turístico</option>
                                  </select>
                                </div>
                              </div>
                              <div class="col-3">
                                <div class="form-group">
                                  <label>Clasificación</label><span *ngIf="categorySelectedCode == '-'"
                                    class="ml-2 badge badge-danger">Incorrecto</span>
                                  <select class="form-control" id="register_type_id" name="register_type_id"
                                    (change)="getCategories()" [(ngModel)]="categorySelectedCode" [disabled]="!rucEstablishmentRegisterSelected.editable">
                                    <option value="-" selected>Seleccione...</option>
                                    <option *ngFor="
                                        let register_type of clasifications_registers
                                      " value="{{ register_type.code }}">
                                      {{ register_type.name }}
                                    </option>
                                  </select>
                                </div>
                              </div>
                              <div class="col-3">
                                <div class="form-group">
                                  <label>Categoría</label><span *ngIf="
                                      rucEstablishmentRegisterSelected.register_type_id ==
                                      0
                                    " class="ml-2 badge badge-danger">Incorrecto</span>
                                  <select class="form-control" id="register_type_id" name="register_type_id"
                                    (change)="getAllowedInfo()" [(ngModel)]="
                                      rucEstablishmentRegisterSelected.register_type_id
                                    " [disabled]="!rucEstablishmentRegisterSelected.editable">
                                    <option value="0" selected>Seleccione...</option>
                                    <option *ngFor="
                                        let register_type of categories_registers
                                      " value="{{ register_type.id }}">
                                      {{ register_type.name }}
                                    </option>
                                  </select>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="row mt-3" *ngIf="categorySelectedCode !== '-' && rucEstablishmentRegisterSelected.register_type_id !== 0">
                          <h4 class="col-12">
                            <strong>Capacidades del Establecimiento</strong>
                          </h4>
                        </div>
                        <div class="row" *ngIf="categorySelectedCode !== '-' && rucEstablishmentRegisterSelected.register_type_id !== 0">
                          <div class="col-12">
                            <div class="alert alert-info mt-2 mb-2" role="alert">
                              <label class="col-12 text-justify"><strong>Atención</strong></label><br />
                              Habitación doble (matrimonial): Permite la pernoctación y alojamiento de dos personas, ocupando una cama doble o dos camas individuales.<br/>
                              PAX: Referente a pasajeros.
                            </div>
                          </div>
                        </div>
                        <div class="row" *ngIf="categorySelectedCode !== '-' && rucEstablishmentRegisterSelected.register_type_id !== 0">
                          <div class="col-12">
                            <label class="col-form-label mb-2"><strong>Habitaciones del Establecimiento</strong><span
                                class="ml-2 mr-2 badge badge-info">Total de Habitaciones:
                                {{
                                rucEstablishmentRegisterSelected.total_habitations
                              }}</span><span class="mr-2 badge badge-info">Total de Camas:
                                  {{
                                    rucEstablishmentRegisterSelected.total_beds
                                  }}</span><span class="mr-2 badge badge-info">Total de Plazas:
                                {{
                                  rucEstablishmentRegisterSelected.total_spaces
                                }}</span><span class="badge badge-danger" *ngIf="
                                  rucEstablishmentRegisterSelected.total_spaces == 0
                                ">Incorrecto</span></label>
                          </div>
                          <div class="col-12">
                            <table class="table table-hover mt-2">
                              <thead>
                                <th>
                                  <button type="button" title="Agregar" class="btn btn-success ml-2" (click)="addCapacity()" [disabled]="!rucEstablishmentRegisterSelected.editable">
                                    <i class="fas fa-plus-circle"></i>
                                  </button>
                                </th>
                                <th>Tipo de Habitación</th>
                                <th>Habitaciones</th>
                                <th>Camas</th>
                                <th>Plazas</th>
                                <th>Opciones</th>
                              </thead>
                              <tbody>
                                <tr *ngFor="let capacity of rucEstablishmentRegisterSelected.capacities_on_register" (click)="selectCapacity(capacity)">
                                  <td class="text-right">
                                      <span *ngIf="capacity.capacity_type_id == 0 || capacity.quantity == 0"
                                      class="ml-2 badge badge-danger">Incorrecto</span>
                                  </td>
                                  <td>
                                    <select class="form-control" id="capacity_type_id" name="capacity_type_id"
                                      [(ngModel)]="capacity.capacity_type_id" (change)="getMaxBed(capacity)" [disabled]="!rucEstablishmentRegisterSelected.editable">
                                      <option value="0" selected>Seleccione...</option>
                                      <option *ngFor="
                                          let capacity_type of allowed_capacity_types
                                        " value="{{ capacity_type.id }}">
                                        {{ capacity_type.name }}
                                      </option>
                                    </select>
                                  </td>
                                  <td>
                                      <input type="number" class="form-control" min="0" max="9999" id="count_space" name="count_space" (input)="calcSpaces(capacity)"
                                      placeholder="Cantidad" [(ngModel)]="capacity.quantity" [disabled]="!rucEstablishmentRegisterSelected.editable"/>
                                  </td>
                                  <td>
                                    <div class="col-12">
                                        <input type="number" class="form-control" min="0" max="9999" id="count_camas" name="count_camas" (input)="calcSpaces(capacity)"
                                        placeholder="Cantidad de Camas" [(ngModel)]="capacity.max_bed" [disabled]="!rucEstablishmentRegisterSelected.editable || !capacity.editable_beds"/>
                                    </div>
                                  </td>
                                  <td>
                                    <div class="col-12">
                                        <input type="number" class="form-control" min="0" max="9999" id="count_plazas" name="count_plazas" (input)="calcSpaces()"
                                        placeholder="Cantidad de Plazas" [(ngModel)]="capacity.max_spaces" [disabled]="!rucEstablishmentRegisterSelected.editable || !capacity.editable_spaces"/>
                                    </div>
                                  </td>
                                  <td>
                                    <button type="button" title="Eliminar" class="btn btn-danger"
                                      (click)="removeCapacity(capacity)" [disabled]="!rucEstablishmentRegisterSelected.editable">
                                      <i class="fas fa-trash"></i>
                                    </button>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                        <div class="row" *ngIf="categorySelectedCode !== '-' && rucEstablishmentRegisterSelected.register_type_id !== 0 && tarifarioRack.valores.length > 0">
                          <div class="col-12">
                            <div class="alert alert-info mt-2 mb-2" role="alert">
                              <label class="col-12 text-justify"><strong>Atención</strong></label><br />
                              Para registrar las tarifas en esta tipología de habitación, es necesario que su establecimiento cuente con la declaración de dichas habitaciones, por favor revise la sección Capacidades del establecimiento que se encuentra en la sección anterior
                            </div>
                          </div>
                        </div>
                        <div class="row mt-3" *ngIf="categorySelectedCode !== '-' && rucEstablishmentRegisterSelected.register_type_id !== 0 && tarifarioRack.valores.length > 0">
                          <h4 class="col-12">
                            <strong>Tarifario RACK</strong>
                          </h4>
                        </div>
                        <div class="row" *ngIf="categorySelectedCode !== '-' && rucEstablishmentRegisterSelected.register_type_id !== 0 && tarifarioRack.valores.length > 0">
                          <div class="col-12">
                              <table class="table table-hover mt-2">
                                <thead>
                                  <th *ngFor="let tariff of tarifarioRack.cabecera">
                                    <div class="row">
                                      <div class="col-12 text-center">{{tariff.valor}}</div>
                                    </div>
                                  </th>
                                </thead>
                                <tbody>
                                  <tr *ngFor="let tariffRack of tarifarioRack.valores">
                                    <td>
                                      <select class="form-control" id="capacity_type_id" name="capacity_type_id"
                                        [(ngModel)]="tariffRack.idTipoCapacidad" [disabled]="true">
                                        <option value="0" selected>Seleccione...</option>
                                        <option *ngFor="
                                            let capacity_type of allowed_capacity_types
                                          " value="{{ capacity_type.id }}">
                                          {{ capacity_type.name }}
                                        </option>
                                      </select>
                                    </td>
                                    <td *ngFor="let tariff of tariffRack.tariffs">
                                        <div class="input-group mb-3">
                                            <div class="input-group-prepend">
                                              <span class="input-group-text" id="basic-addon1">USD</span>
                                            </div>
                                            <input type="number" *ngIf="!(!tariffRack.editable || (!tariff.isReference) && tariff.plazasHabitacion !== 999)" class="form-control" min="0" step="0.01" id="low_capacity_room_price"
                                            name="low_capacity_room_price" (input)="checkValuesTariffs()" [(ngModel)]="tariff.tariff.price" placeholder="Precio" [disabled]="(!tariffRack.editable || (!tariff.isReference) && tariff.plazasHabitacion !== 999)"/>
                                            <input type="number" *ngIf="(!tariffRack.editable || (!tariff.isReference) && tariff.plazasHabitacion !== 999)" class="form-control" min="0" step="0.01" id="low_capacity_room_price"
                                            name="low_capacity_room_price" (input)="checkValuesTariffs()" readonly [ngModel]="tariff.tariff.price | number: '1.2'" (ngModelChange)="tariff.tariff.price = $event" placeholder="Precio" [disabled]="(!tariffRack.editable || (!tariff.isReference) && tariff.plazasHabitacion !== 999)"/>
                                          </div>
                                    </td>
                                  </tr>
                                </tbody>
                              </table>
                          </div>
                        </div>
                        <div class="row" *ngIf="categorySelectedCode !== '-' && rucEstablishmentRegisterSelected.register_type_id !== 0 && tarifarioRack.valores.length > 0">
                          <div class="col-12">
                            <div class="alert alert-info mt-2 mb-2" role="alert">
                              <label class="col-12 text-justify"><strong>Atención</strong></label><br />
                              Estimado Usuario, antes de continuar recuerde lo siguiente:<br/>
                              - Registrar la Tarifa de habitación por noche incluyendo IVA.<br/>
                              - Reglamento de Alojamiento, Anexo A, Requisito 20: Exhibir el tarifario rack anual registrado ante la autoridad nacional de turismo.<br/>
                              - Reglamento de Alojamiento, Disposición General, Tercera: Los establecimientos de alojamiento turístico deberán informar a la autoridad nacional de turismo hasta el primero de diciembre de cada año sobre las tarifas rack o mostrador del año siguiente. Estas considerarán el valor por huésped, por noche, por tipo de habitación y por temporada baja y alta, incluido impuestos; de no hacerlo la autoridad nacional de turismo sancionará conforme a la normativa vigente.<br/>
                              - El formulario será enviado a su correo electrónico posterior a la validación correspondiente.<br/>
                            </div>
                          </div>
                        </div>
                        <div class="row" *ngIf="categorySelectedCode !== '-' && rucEstablishmentRegisterSelected.register_type_id !== 0 && false">
                          <div class="col-12">
                            <div class="form-group">
                                <label><strong>Salas de Recepciones</strong></label>
                            </div>
                          </div>
                        </div>
                        <div class="form-group"
                          *ngIf="categorySelectedCode !== '-' && rucEstablishmentRegisterSelected.register_type_id !== 0 && false">
                          <label>¿Su establecimiento cuenta con alquiler de Salas de Recepciones?</label>
                          <div class="col-12">
                              <label class="switch"><input type="checkbox" id="salas_recepciones"
                                name="salas_recepciones" [(ngModel)]="
                                salaRecepciones.fullfill
                                " [disabled]="!rucEstablishmentRegisterSelected.editable"/><span class="slider round"></span></label>
                          </div>
                        </div>
                        <div class="form-group"
                          *ngIf="salaRecepciones.fullfill && false">
                          <label>Especifique Cuantas</label>
                          <div class="col-12">
                            <input type="number" class="form-control" min="0" id="salasCount" name="salasCount"
                              placeholder="Cantidad de Salas de Recepciones"
                              [(ngModel)]="salaRecepciones.quantity" [disabled]="!rucEstablishmentRegisterSelected.editable"/>
                          </div>
                        </div>
                        <div class="row" *ngIf="categorySelectedCode !== '-' && rucEstablishmentRegisterSelected.register_type_id !== 0">
                          <div class="col-12">
                            <div class="form-group">
                                <label><strong>Servicios Complementarios</strong></label>
                            </div>
                          </div>
                        </div>
                        <div class="form-group"
                          *ngIf="categorySelectedCode !== '-' && rucEstablishmentRegisterSelected.register_type_id !== 0">
                          <label>¿Su establecimiento cuenta con algún servicio de Alimentos y Bebidas complementario de alojamiento?</label>
                          <div class="col-12">
                            <label class="switch"><input type="checkbox" id="autorized_complementary_adventure_capacities"
                                name="autorized_complementary_adventure_capacities" [(ngModel)]="
                                  rucEstablishmentRegisterSelected.autorized_complementary_food_capacities
                                " [disabled]="!rucEstablishmentRegisterSelected.editable"/><span class="slider round"></span></label>
                          </div>
                        </div>
                        <div class="row" *ngIf="rucEstablishmentRegisterSelected.autorized_complementary_food_capacities">
                          <div class="col-12">
                            <table class="table table-hover mt-2">
                              <thead>
                                <th>
                                  <button type="button" title="Agregar" class="btn btn-success ml-2"
                                    (click)="addComplementaryFoodService()" [disabled]="!rucEstablishmentRegisterSelected.editable">
                                    <i class="fas fa-plus-circle"></i>
                                  </button>
                                </th>
                                <th>Clasificación</th>
                                <th>Cantidad de Mesas</th>
                                <th>Cantidad de Plazas</th>
                                <th>Opciones</th>
                              </thead>
                              <tbody>
                                <tr (click)="selectComplementaryFoodService(complementaryServiceFood)"
                                  *ngFor="let complementaryServiceFood of rucEstablishmentRegisterSelected.complementary_service_foods_on_register">
                                  <td class="text-right">
                                      <span *ngIf="complementaryServiceFood.complementary_service_food_type_id == 0"
                                      class="ml-2 badge badge-danger">Incorrecto</span>
                                  </td>
                                  <td>
                                    <select *ngIf="rucEstablishmentRegisterSelected.editable" class="form-control" id="complementary_service_food_id"
                                      name="complementary_service_food_id" [(ngModel)]="
                                      complementaryServiceFood.complementary_service_food_type_id
                                      " [disabled]="!rucEstablishmentRegisterSelected.editable">
                                      <option value="0" selected>Seleccione...</option>
                                      <option *ngFor="
                                          let complementary_food_service_type of complementaryServiceFood.type_of_complementary_service_food
                                        " value="{{ complementary_food_service_type.id }}">
                                        {{ complementary_food_service_type.name }}
                                      </option>
                                    </select>

                                    <select *ngIf="!rucEstablishmentRegisterSelected.editable" class="form-control" id="complementary_service_food_id"
                                      name="complementary_service_food_id" [(ngModel)]="
                                      complementaryServiceFood.complementary_service_food_type_id
                                      " [disabled]="!rucEstablishmentRegisterSelected.editable">
                                      <option value="0" selected>Seleccione...</option>
                                      <option *ngFor="
                                          let complementary_food_service_type of complementaryServiceFoodTypes
                                        " value="{{ complementary_food_service_type.id }}">
                                        {{ complementary_food_service_type.name }}
                                      </option>
                                    </select>
                                  </td>
                                  <td>
                                    <input type="number" class="form-control" min="0" id="mesas" name="mesas"
                                      placeholder="Cantidad de Mesas"
                                      [(ngModel)]="complementaryServiceFood.quantity_tables" (keyup)="complementaryServiceFood.quantity_chairs = complementaryServiceFood.quantity_tables * 4" [disabled]="!rucEstablishmentRegisterSelected.editable"/>
                                  </td>
                                  <td>
                                    <input type="number" class="form-control" min="0" id="sillas" name="sillas"
                                      placeholder="Cantidad de Plazas"
                                      [(ngModel)]="complementaryServiceFood.quantity_chairs"/>
                                  </td>
                                  <td>
                                    <button type="button" title="Eliminar" class="btn btn-danger"
                                      (click)="removeComplementaryFoodService(complementaryServiceFood)" [disabled]="!rucEstablishmentRegisterSelected.editable">
                                      <i class="fas fa-trash"></i>
                                    </button>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                        <div class="row mt-3" *ngIf="categorySelectedCode !== '-' && rucEstablishmentRegisterSelected.register_type_id !== 0">
                          <h4 class="col-12">
                            <strong>Modalidades de Turismo de Aventura</strong>
                          </h4>
                        </div>
                        <div class="form-group"
                          *ngIf="categorySelectedCode !== '-' && rucEstablishmentRegisterSelected.register_type_id !== 0">
                          <label>¿Su establecimiento oferta alguna modalidad de turismo de aventura, dentro de sus linderos?</label>
                          <div class="col-12">
                            <label class="switch"><input type="checkbox" id="autorized_complementary_adventure_capacities"
                                name="autorized_complementary_adventure_capacities" [(ngModel)]="
                                  rucEstablishmentRegisterSelected.autorized_complementary_capacities
                                " [disabled]="!rucEstablishmentRegisterSelected.editable"/><span class="slider round"></span></label>
                          </div>
                        </div>
                        <div class="form-group row" *ngIf="
                            rucEstablishmentRegisterSelected.autorized_complementary_capacities
                          ">
                          <label class="col-12 col-form-label mb-2"><strong>Clases de Modalidades de Turismo de Aventura</strong></label>
                          <div class="col-12">
                            <div class="input-group" *ngIf="rucEstablishmentRegisterSelected.editable">
                              <div class="input-group-prepend">
                                <button type="button" title="Eliminar" class="btn btn-danger"
                                  (click)="removeComplementaryServiceType()" [disabled]="!rucEstablishmentRegisterSelected.editable">
                                  <i class="fas fa-trash"></i>
                                </button>
                                <button type="button" title="Agregar" class="btn btn-success"
                                  (click)="addComplementaryServiceType()" [disabled]="!rucEstablishmentRegisterSelected.editable">
                                  <i class="fas fa-save"></i>
                                </button>
                              </div>
                              <select class="form-control" id="complementary_service_type_category_code"
                                name="complementary_service_type_category_code" #categoryFilter (change)="
                                  getComplementaryServiceType(categoryFilter.value)
                                " [disabled]="!rucEstablishmentRegisterSelected.editable">
                                <option value="0" selected>Seleccione...</option>
                                <option *ngFor="
                                    let complementary_service_type of complementary_service_types_categories
                                  " value="{{ complementary_service_type.code }}">
                                  {{ complementary_service_type.name }}
                                </option>
                              </select>
                              <select class="form-control" id="complementary_service_type_id"
                                name="complementary_service_type_id" [(ngModel)]="
                                  complementary_service_types_registerSelectedId
                                " [disabled]="!rucEstablishmentRegisterSelected.editable">
                                <option value="0" selected>Seleccione...</option>
                                <option *ngFor="
                                    let complementary_service_type of complementary_service_types
                                  " value="{{ complementary_service_type.id }}">
                                  {{ complementary_service_type.name }}
                                </option>
                              </select>
                            </div>
                          </div>
                          <div class="col-4"></div>
                          <div class="col-8">
                            <table class="table table-hover mt-2">
                              <tbody>
                                <tr *ngFor="
                                    let complementary_service_type of rucEstablishmentRegisterSelected.complementary_service_types_on_register
                                  " (click)="
                                    selectComplementaryServiceType(
                                      complementary_service_type
                                    )
                                  ">
                                  <td class="text-right">
                                    <span *ngIf="
                                        complementary_service_types_registerSelectedId ===
                                        complementary_service_type.id
                                      " class="far fa-hand-point-right"></span>
                                  </td>
                                  <td>{{ complementary_service_type.name }}</td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                        <div class="row" *ngIf="showRequisites">
                          <label class="col-12 col-form-label mb-2"><strong>Requisitos</strong></label>
                          <div class="col-12">
                            <div class="alert alert-warning" role="alert">
                              <label class="col-12 text-justify"><strong>Atención</strong><br />
                                Los requisitos listados a continuación serán revisados
                                por el inspector del Ministerio de Turismo el día de
                                la visita a su establecimiento. Asegúrese que su establecimiento cumpla con aquellos seleccionados.
                              </label>
                            </div>
                          </div>
                          <div class="col-12">
                            <div class="row mt-3">
                                <h4 class="col-12">
                                  <strong>Normativa</strong>
                                </h4>
                              </div>
                          </div>
                          <div class="col-12">
                              <div class="form-group row">
                                <div class="col-12">
                                  <table class="table table-hover mt-2">
                                    <tbody>
                                      <tr *ngFor="
                                              let register_requisite of rucEstablishmentRegisterSelected.requisites
                                            ">
                                        <td>
                                          <label
                                            *ngIf="register_requisite.HTMLtype !== 'GRUPO 0' &&
                                            register_requisite.HTMLtype !== 'GRUPO 1' &&
                                            register_requisite.HTMLtype !== 'GRUPO 2' &&
                                            register_requisite.HTMLtype !== 'GRUPO 3' &&
                                            register_requisite.HTMLtype !== 'GRUPO 4' && 
                                            register_requisite.HTMLtype !== 'GRUPO 5'">{{ register_requisite.requisite_name }}</label>
                                          <h5>
                                            <strong
                                            *ngIf="register_requisite.HTMLtype == 'GRUPO 0'">{{ register_requisite.requisite_name }}</strong>
                                          </h5>
                                          <h6>
                                            <strong
                                              *ngIf="register_requisite.HTMLtype == 'GRUPO 1'">{{ register_requisite.requisite_name }}</strong>  
                                          </h6>
                                          <strong
                                              *ngIf="register_requisite.HTMLtype == 'GRUPO 2'">{{ register_requisite.requisite_name }}</strong>
                                          <i>
                                            <strong
                                              *ngIf="register_requisite.HTMLtype == 'GRUPO 3'">{{ register_requisite.requisite_name }}</strong>
                                          </i>
                                          <i>
                                            <strong
                                              *ngIf="register_requisite.HTMLtype == 'GRUPO 4'">{{ register_requisite.requisite_name }}</strong>
                                          </i>
                                          <i>
                                            <strong
                                              *ngIf="register_requisite.HTMLtype == 'GRUPO 5'">{{ register_requisite.requisite_name }}</strong>
                                          </i>
                                        </td>
                                        <td>
                                          <label class="switch"
                                            *ngIf="register_requisite.HTMLtype == 'TRUE / FALSE'"><input
                                              type="checkbox" id="cumple" name="cumple" [(ngModel)]="
                                              register_requisite.fullfill
                                                  " (change)="changeFullfill(register_requisite)" /><span class="slider round"></span></label>
                                          <select class="form-control" *ngIf="register_requisite.HTMLtype == 'YES / NO'"
                                          [(ngModel)]="register_requisite.value"
                                          >
                                            <option value="0" selected>Seleccione...</option>
                                            <option value="SI" selected>SI</option>
                                            <option value="NO" selected>NO</option>
                                          </select>
                                          <input type="number" *ngIf="register_requisite.HTMLtype == 'NUMBER'" [(ngModel)]="register_requisite.value" class="form-control" min="0" 
                                          />
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                  <table class="table table-hover mt-2">
                                    <tbody>
                                      <tr>
                                        <td>
                                            <label>Idiomas de Atención en el
                                                Establecimiento</label>
                                        </td>
                                        <td>
                                          <div class="form-group row">
                                            <div class="col-12">
                                              <div class="input-group" *ngIf="rucEstablishmentRegisterSelected.editable">
                                                <div class="input-group-prepend">
                                                  <button type="button" title="Eliminar" class="btn btn-danger" (click)="removeLanguage()">
                                                    <i class="fas fa-trash"></i>
                                                  </button>
                                                  <button type="button" title="Agregar" class="btn btn-success" (click)="addLanguage()">
                                                    <i class="fas fa-save"></i>
                                                  </button>
                                                </div>
                                                <select class="form-control" id="language_id" name="language_id"
                                                  [(ngModel)]="languages_establishmentSelectedId">
                                                  <option value="0" selected>Seleccione...</option>
                                                  <option *ngFor="let language of languages" value="{{ language.id }}">
                                                    {{ language.name }}
                                                  </option>
                                                </select>
                                              </div>
                                            </div>
                                            <div class="col-4"></div>
                                            <div class="col-8">
                                              <table class="table table-hover mt-2">
                                                <tbody>
                                                  <tr *ngFor="
                                                      let language of establishment_selected.languages_on_establishment
                                                    " (click)="selectLanguage(language)">
                                                    <td class="text-right">
                                                      <span *ngIf="
                                                          languages_establishmentSelectedId ===
                                                          language.id
                                                        " class="far fa-hand-point-right"></span>
                                                    </td>
                                                    <td>{{ language.name }}</td>
                                                  </tr>
                                                </tbody>
                                              </table>
                                            </div>
                                          </div>
                                        </td>
                                      </tr>
                                      <tr>
                                        <td>
                                          <label>Certificado de Uso de Suelos*</label><span
                                            *ngIf="certificadoUsoSuelo.floor_authorization_certificate_file === ''"
                                            class="ml-2 badge badge-danger">Incorrecto</span>
                                        </td>
                                        <td>
                                          <div class="input-group">
                                            <div class="input-group-prepend">
                                              <button
                                                [disabled]="certificadoUsoSuelo.floor_authorization_certificate_file === ''"
                                                type="button" title="Descargar Certificado" class="btn btn-primary" (click)="
                                                      downloadFloorCertification()
                                                    ">
                                                <i class="fas fa-download"></i>
                                              </button>
                                              <button
                                                [disabled]="certificadoUsoSuelo.floor_authorization_certificate_file === '' || !rucEstablishmentRegisterSelected.editable"
                                                type="button" title="Eliminar" class="btn btn-danger"
                                                (click)="borrarFloorCertificado()">
                                                <i class="fas fa-trash"></i>
                                              </button>
                                            </div>
                                            <input type="file" class="form-control" [disabled]="!rucEstablishmentRegisterSelected.editable" (change)="
                                                  CodificarArchivoFloorCertification(
                                                    $event
                                                  )
                                                " accept="application/pdf" />
                                          </div>
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </div>
                              </div>
                            </div>

                        </div>
                      </div>
                    </div>
                    <div class="row mt-3" *ngIf="validateRegister()">
                      <div class="col-12 text-center">
                        <button *ngIf="establishment_selected.id !== 0" type="button" class="btn btn-info mr-2" title="Anterior"
                          (click)="pasos.select('paso2')">
                          <i class="fas fa-arrow-left"></i>&nbsp;Anterior
                        </button>
                        <button [disabled]="guardando" type="button" class="btn btn-success" title="Actualizar Información"
                          (click)="guardarRegistro()">
                          <i class="fas fa-paper-plane"></i>&nbsp;Solicitar Trámite
                        </button>
                        <button type="button" class="btn btn-danger ml-2" title="Cancelar Cambios" (click)="
                            refresh()
                          ">
                          <i class="fas fa-trash"></i>&nbsp;Cancelar Cambios
                        </button>
                      </div>
                    </div>
                  </ng-template>
                </ngb-tab>
                </ngb-tabset>
            </ng-template>
          </ngb-tab>
        </ngb-tabset>
      </div>
    </div>
  </div>
</div>

<ng-template #content let-modal>
  <div class="modal-header">
    <h3>Observaciones</h3>
  </div>
  <div class="modal-body">
    <div class="row">
      <div class="col-12 text-justify" [innerHTML]="statusSelected.justification"></div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-success" (click)="modal.close('Guardar click')">Cerrar</button>
  </div>
</ng-template>